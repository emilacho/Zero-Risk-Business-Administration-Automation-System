# ðŸ—ï¸ ARQUITECTURA DEL SISTEMA - ZERO RISK

## Sistema de GestiÃ³n Administrativa Automatizada

**VersiÃ³n:** 1.0  
**Fecha:** Febrero 2026  
**Tipo:** DocumentaciÃ³n TÃ©cnica

---

## ðŸ“Š VISIÃ“N GENERAL

### **Tipo de Arquitectura:**
**Modular Event-Driven con Base de Datos Centralizada**

### **Principios de DiseÃ±o:**
1. **Modularidad** - Archivos independientes, funcionalidades separadas
2. **Single Source of Truth** - Una sola base de datos maestra
3. **Event-Driven** - Acciones del usuario disparan automatizaciones
4. **Fail-Safe** - Validaciones antes de operaciones irreversibles
5. **User-Friendly** - Interfaz familiar (Google Sheets)

---

## ðŸ”· ARQUITECTURA DE ALTO NIVEL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPA DE PRESENTACIÃ“N                          â”‚
â”‚                    (User Interface Layer)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  PROFORMA   â”‚  â”‚  FACTURA    â”‚  â”‚   GASTOS    â”‚             â”‚
â”‚  â”‚  TEMPLATE   â”‚  â”‚  TEMPLATE   â”‚  â”‚  TEMPLATE   â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚             â”‚
â”‚  â”‚ â€¢ Listas â–¼  â”‚  â”‚ â€¢ Listas â–¼  â”‚  â”‚ â€¢ Entrada   â”‚             â”‚
â”‚  â”‚ â€¢ Auto-fill â”‚  â”‚ â€¢ Auto-fill â”‚  â”‚   directa   â”‚             â”‚
â”‚  â”‚ â€¢ CÃ¡lculos  â”‚  â”‚ â€¢ CÃ¡lculos  â”‚  â”‚ â€¢ Resumen   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                â”‚                â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚    CAPA DE LÃ“GICA DE NEGOCIO    â”‚                     â”‚
â”‚         â”‚    (Business Logic Layer)       â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â”‚   GOOGLE APPS SCRIPT ENGINE    â”‚                 â”‚
â”‚              â”‚   (JavaScript Runtime)         â”‚                 â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚              â”‚                                â”‚                 â”‚
â”‚              â”‚  ðŸ“ crearFacturaDesdeProforma()â”‚                 â”‚
â”‚              â”‚  ðŸ’° registrarEnContabilidad()  â”‚                 â”‚
â”‚              â”‚  ðŸ”¢ obtenerNumeroFactura()     â”‚                 â”‚
â”‚              â”‚  ðŸ“Š actualizarDashboard()      â”‚                 â”‚
â”‚              â”‚  âš ï¸  validarDatos()            â”‚                 â”‚
â”‚              â”‚  ðŸ”„ autoLlenarCliente()        â”‚                 â”‚
â”‚              â”‚                                â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                           â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CAPA DE DATOS                                 â”‚
â”‚                   (Data Layer)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â”‚   BASE DE DATOS CENTRAL        â”‚                 â”‚
â”‚              â”‚   (Google Sheets)              â”‚                 â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚              â”‚                                â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Clientes             â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Productos            â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Config               â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Libro Diario         â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Mayor General        â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Cuentas x Cobrar     â”‚                 â”‚
â”‚              â”‚  ðŸ“ Hoja: Transacciones        â”‚                 â”‚
â”‚              â”‚                                â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ FLUJO DE DATOS

### **Escenario 1: Crear Proforma**

```
USUARIO                    PROFORMA                  BASE DATOS
   â”‚                          â”‚                          â”‚
   â”‚  Selecciona cliente      â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚  IMPORTRANGE            â”‚
   â”‚                          â”‚  obtener datos          â”‚
   â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                          â”‚  RUC, Tel, Email        â”‚
   â”‚  Auto-llena datos        â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”‚  Selecciona producto     â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚  VLOOKUP precio         â”‚
   â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  Auto-llena precio       â”‚  $30.00                 â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”‚  Escribe cantidad: 15    â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚  Calcula: 15 Ã— $30      â”‚
   â”‚  Total: $450             â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
```

---

### **Escenario 2: Crear Factura desde Proforma**

```
USUARIO              PROFORMA           APPS SCRIPT         BASE DATOS          NUEVA FACTURA
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚  Click menÃº:       â”‚                    â”‚                  â”‚                     â”‚
   â”‚  "Crear Factura"   â”‚                    â”‚                  â”‚                     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                  â”‚                     â”‚
   â”‚                    â”‚  Trigger evento    â”‚                  â”‚                     â”‚
   â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚  Leer datos      â”‚                     â”‚
   â”‚                    â”‚                    â”‚  proforma        â”‚                     â”‚
   â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚  Obtener         â”‚                     â”‚
   â”‚                    â”‚                    â”‚  nÃºmero factura  â”‚                     â”‚
   â”‚                    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
   â”‚                    â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
   â”‚                    â”‚                    â”‚  #159            â”‚                     â”‚
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚  Incrementar contador                 â”‚
   â”‚                    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
   â”‚                    â”‚                    â”‚                  â”‚  Config B8: 159â†’160 â”‚
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚  Copiar template â”‚                     â”‚
   â”‚                    â”‚                    â”‚  factura         â”‚                     â”‚
   â”‚                    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚                    â”‚                    â”‚  Llenar datos    â”‚                     â”‚
   â”‚                    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                    â”‚                    â”‚                  â”‚  Cliente: Exportq.  â”‚
   â”‚                    â”‚                    â”‚                  â”‚  NÂº: 159            â”‚
   â”‚                    â”‚                    â”‚                  â”‚  Total: $621        â”‚
   â”‚                    â”‚                    â”‚                  â”‚                     â”‚
   â”‚  Confirmar: OK     â”‚                    â”‚                  â”‚                     â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                     â”‚
```

---

### **Escenario 3: Registrar Factura en Contabilidad**

```
USUARIO       FACTURA      APPS SCRIPT     LIBRO DIARIO    MAYOR GENERAL    CXC      EST.RESULTADOS
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚  Click:     â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚  "Registrar"â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚  Trigger     â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  Leer datos   â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  factura      â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  Crear        â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  3 asientos   â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚  Asiento #127 â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚  Debe: $621   â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚  Haber: $621  â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚  Actualizar   â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚  saldos       â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚  CxC:+$621 â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚  Ventas:+  â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  Crear        â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  entrada CxC  â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Cliente    â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Factura    â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Total      â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Saldo      â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  Actualizar   â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”‚  Est.Result.  â”‚               â”‚            â”‚             â”‚
   â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Ventas:+  â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚  Utilidad  â”‚
   â”‚             â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚  âœ… Success â”‚              â”‚               â”‚               â”‚            â”‚             â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚               â”‚            â”‚             â”‚
```

---

## ðŸ—„ï¸ MODELO DE DATOS

### **Tablas Principales:**

#### **1. CLIENTES**
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ID  â”‚  RazÃ³n Social   â”‚      RUC       â”‚  TelÃ©fono  â”‚          Email           â”‚  DirecciÃ³n  â”‚ Estado â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1   â”‚  Exportquilsa   â”‚ 0992345678001  â”‚ 0986434504 â”‚ compras@exportquilsa.com â”‚  Guayaquil  â”‚ Activo â”‚
â”‚  2   â”‚  Interhospital  â”‚ 0992345679001  â”‚ 042345678  â”‚ compras@interhospital... â”‚  Guayaquil  â”‚ Activo â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **2. PRODUCTOS**
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ID  â”‚   CÃ³digo   â”‚           Nombre             â”‚   Tipo   â”‚  Precio â”‚ Unidad  â”‚ Estado â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1   â”‚ EXT-REC-20 â”‚ Recarga extintor 20 Lbs PQS  â”‚ Servicio â”‚  30.00  â”‚   U     â”‚ Activo â”‚
â”‚  2   â”‚ EXT-CO2-10 â”‚ Extintor CO2 10 lb           â”‚ Producto â”‚  30.00  â”‚   U     â”‚ Activo â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **3. LIBRO DIARIO**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Fecha    â”‚ Asiento â”‚   Doc    â”‚  NÂº    â”‚   Cliente    â”‚      Cuenta       â”‚   Debe     â”‚  Haber  â”‚ Saldo  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 22/02/2026 â”‚   127   â”‚ Factura  â”‚  159   â”‚ Exportquilsa â”‚ Cuentas por Cobrarâ”‚   621.00   â”‚    0    â”‚ 621.00 â”‚
â”‚ 22/02/2026 â”‚   127   â”‚ Factura  â”‚  159   â”‚ Exportquilsa â”‚ Ventas            â”‚     0      â”‚  540.00 â”‚-540.00 â”‚
â”‚ 22/02/2026 â”‚   127   â”‚ Factura  â”‚  159   â”‚ Exportquilsa â”‚ IVA por Pagar     â”‚     0      â”‚   81.00 â”‚ -81.00 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **4. CUENTAS POR COBRAR**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente    â”‚ NÂº Factura â”‚   Fecha    â”‚ Vencimiento â”‚ DÃ­as â”‚  Total  â”‚ Pagado  â”‚  Saldo  â”‚  Estado   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Exportquilsa â”‚    159     â”‚ 22/02/2026 â”‚ 24/03/2026  â”‚   2  â”‚  621.00 â”‚    0    â”‚  621.00 â”‚  Al DÃ­a   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” SEGURIDAD Y CONTROL DE ACCESO

### **Niveles de Acceso:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Rol        â”‚ Base Datos   â”‚  Templates â”‚   Facturas   â”‚ Dashboard â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Administrador  â”‚   Editar     â”‚   Editar   â”‚    Editar    â”‚   Ver     â”‚
â”‚  (Emilio)       â”‚              â”‚            â”‚              â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Contador       â”‚   Ver        â”‚   Ver      â”‚    Ver       â”‚   Ver     â”‚
â”‚                 â”‚              â”‚            â”‚              â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Asistente      â”‚   Sin acceso â”‚   Editar   â”‚    Editar    â”‚ Sin accesoâ”‚
â”‚  Operativo      â”‚              â”‚  templates â”‚   (crear)    â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Protecciones:**

âœ… **Base de Datos:**
- Solo lectura para consultas (IMPORTRANGE)
- EdiciÃ³n solo mediante Apps Script validado
- Historial de versiones (30 dÃ­as)
- Backup diario automÃ¡tico (Google Drive)

âœ… **Validaciones:**
- Datos obligatorios antes de guardar
- Formatos validados (RUC, email)
- Confirmaciones para acciones irreversibles
- Log de todas las transacciones

---

## âš¡ EVENTOS Y TRIGGERS

### **Eventos del Usuario:**

```
EVENTO                         TRIGGER                      ACCIÃ“N
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Selecciona cliente            onChange()                   â†’ Auto-llenar datos
Selecciona producto           onChange()                   â†’ Auto-llenar precio
Click "Crear Factura"         onMenuClick()                â†’ crearFacturaDesdeProforma()
Click "Registrar Contab."     onMenuClick()                â†’ registrarEnContabilidad()
Edita "Pagado" en CxC         onEdit()                     â†’ actualizarEstado()
Abre Dashboard                onOpen()                     â†’ actualizarKPIs()
```

### **Automatizaciones Programadas:**

```
FRECUENCIA              ACCIÃ“N                           PROPÃ“SITO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Diaria (6:00 AM)        Backup de Base de Datos          Respaldo automÃ¡tico
Diaria (8:00 AM)        Verificar facturas vencidas      Enviar alertas
Semanal (Lunes)         Reporte semanal                  Email al admin
Mensual (dÃ­a 1)         Cerrar perÃ­odo contable          Consolidar mes
```

---

## ðŸ“ˆ ESCALABILIDAD

### **LÃ­mites Actuales:**

```
RECURSO                      LÃMITE GOOGLE SHEETS         CAPACIDAD ACTUAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Filas por hoja               5,000,000                    ~500 (1%)
Celdas total                 10,000,000                   ~50,000 (0.5%)
IMPORTRANGE concurrentes     50                           3 (6%)
Scripts/dÃ­a                  Unlimited (con restricciones) ~20/dÃ­a
```

### **Estrategia de Crecimiento:**

**Fase 1 (Actual):** 18 clientes, ~40 facturas/mes
- âœ… Google Sheets suficiente

**Fase 2 (25-50 clientes):** ~100 facturas/mes
- âœ… Mismo sistema, optimizar consultas
- âœ… Agregar Ã­ndices (Named Ranges)

**Fase 3 (>50 clientes):** >150 facturas/mes
- ðŸ”„ Migrar a Google Cloud SQL
- ðŸ”„ Mantener Sheets como front-end
- ðŸ”„ Backend en Apps Script + Cloud Functions

---

## ðŸ”„ MANTENIMIENTO

### **Backup:**
- âœ… Google Drive: AutomÃ¡tico cada 24h
- âœ… Versionado: Ãšltimas 30 versiones
- âœ… Export semanal: CSV + Excel

### **Monitoreo:**
- âœ… Logs de Apps Script
- âœ… Alertas de errores (email)
- âœ… Dashboard de salud del sistema

### **Actualizaciones:**
- âœ… Desarrollo en entorno de prueba
- âœ… Testing con datos ficticios
- âœ… Deploy en horario de bajo uso

---

## ðŸ“š REFERENCIAS TÃ‰CNICAS

### **APIs Utilizadas:**
- SpreadsheetApp (Google Sheets)
- DriveApp (Google Drive)
- MailApp (Gmail)
- UrlFetchApp (HTTP requests)

### **DocumentaciÃ³n:**
- [Google Apps Script Docs](https://developers.google.com/apps-script)
- [Sheets API Reference](https://developers.google.com/sheets/api)

---

**Documento elaborado por:** Emilio PÃ©rez  
**Fecha:** Febrero 2026  
**VersiÃ³n:** 1.0 - Arquitectura Inicial
